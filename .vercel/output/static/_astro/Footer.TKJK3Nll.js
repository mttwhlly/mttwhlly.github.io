import{r as h}from"./index.BVOCwoKb.js";var u={exports:{}},c={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f;function j(){if(f)return c;f=1;var i=Symbol.for("react.transitional.element"),o=Symbol.for("react.fragment");function x(d,s,r){var n=null;if(r!==void 0&&(n=""+r),s.key!==void 0&&(n=""+s.key),"key"in s){r={};for(var m in s)m!=="key"&&(r[m]=s[m])}else r=s;return s=r.ref,{$$typeof:i,type:d,key:n,ref:s!==void 0?s:null,props:r}}return c.Fragment=o,c.jsx=x,c.jsxs=x,c}var y;function k(){return y||(y=1,u.exports=j()),u.exports}var t=k();const g=()=>{const[i,o]=h.useState(null),[x,d]=h.useState(!0),[s,r]=h.useState(null),n=async()=>{try{const l=await fetch("/api/spotify",{method:"POST"});if(!l.ok)throw new Error("Failed to get access token");return(await l.json()).access_token}catch(l){return r("Authentication error"),console.error("Authentication error:",l),null}},m=async l=>{try{let a=await fetch("https://api.spotify.com/v1/me/player/currently-playing",{headers:{Authorization:`Bearer ${l}`}});if(a.status===204){a=await fetch("https://api.spotify.com/v1/me/player/recently-played?limit=1",{headers:{Authorization:`Bearer ${l}`}});const e=await a.json();e&&e.items&&e.items.length>0&&o({name:e.items[0].track.name,artist:e.items[0].track.artists[0].name,album:e.items[0].track.album.name,albumArt:e.items[0].track.album.images[0]?.url,isCurrentlyPlaying:!1,trackLink:e.items[0].track.external_urls.spotify,artistLink:e.items[0].track.artists[0].external_urls.spotify,albumLink:e.items[0].track.album.external_urls.spotify})}else if(a.ok){const e=await a.json();e&&e.item&&o({name:e.item.name,artist:e.item.artists[0].name,album:e.item.album.name,albumArt:e.item.album.images[0]?.url,isCurrentlyPlaying:!0,trackLink:e.item.external_urls.spotify,artistLink:e.item.artists[0].external_urls.spotify,albumLink:e.item.album.external_urls.spotify})}else console.error("Error fetching data:",a.status);d(!1)}catch(a){r("Error fetching data from Spotify"),d(!1),console.error("Error fetching data from Spotify:",a)}};return h.useEffect(()=>{(async()=>{const a=await n();if(a){m(a);const e=setInterval(async()=>{const p=await n();p&&m(p)},3e4);return()=>clearInterval(e)}})()},[]),t.jsxs("div",{className:"flex",children:[x&&t.jsx("p",{children:"Loading..."}),s&&t.jsx("p",{className:"error",children:s}),i&&t.jsx("div",{className:"flex",children:t.jsxs("div",{className:"flex space-x-1",children:[i.isCurrentlyPlaying?t.jsx("span",{className:"text-gray-400 text-sm md:text-md",children:"Current Track"}):t.jsx("span",{className:"text-gray-400 text-sm md:text-md",children:"Recent Track"}),t.jsx("h3",{className:" text-sm md:text-md",children:t.jsxs("a",{href:i.trackLink,children:['"',i.name,'"']})}),t.jsxs("p",{className:" text-sm md:text-md",children:[t.jsx("span",{className:"italic text-sm md:text-md",children:"by"})," ",t.jsx("a",{href:i.artistLink,children:i.artist})]}),t.jsx("div",{className:"status text-sm md:text-md"})]})})]})};function v(){return t.jsx("footer",{className:"shrink bg-black text-white py-12 md:flex-row flex-col",children:t.jsxs("div",{className:"flex md:flex-row flex-col mx-auto px-4 md:px-16 justify-between",children:[t.jsxs("div",{className:"flex flex-col gap-4 my-8 md:my-0",children:[t.jsx("p",{className:"text-sm text-gray-400 font-mono uppercase py-4",children:"_Offline"}),t.jsxs("ul",{children:[t.jsx("li",{className:"h-[42px]",children:t.jsx(g,{})}),t.jsxs("li",{className:"h-[42px] text-sm md:text-md",children:[t.jsx("span",{className:"text-gray-400 font-extralight text-sm md:text-md",children:"Reading"})," ",'"Anxious Generation" ',t.jsx("i",{children:"by"})," Jonathan Haidt"]}),t.jsxs("li",{className:"h-[42px] text-sm md:text-md",children:[t.jsx("span",{className:"text-gray-400 text-sm md:text-md",children:"Climbing"})," Red V5 on Prow Wall"," ",t.jsx("i",{children:"at"})," ",t.jsx("a",{href:"https://stoneclimbing.com/",target:"_blank",children:"Stone Climbing Co."})]})]})]}),t.jsxs("div",{className:"flex flex-col gap-4",children:[t.jsx("p",{className:"text-sm text-gray-400 font-mono uppercase py-4",children:"_Online"}),t.jsxs("ul",{children:[t.jsx("li",{className:"h-[42px] text-sm md:text-md",children:t.jsxs("a",{href:"https://github.com/mttwhlly",target:"_blank",children:[t.jsx("i",{className:"ph-fill ph-github-logo text-gray-400 text-sm md:text-md"})," Github"]})}),t.jsx("li",{className:"h-[42px] text-sm md:text-md",children:t.jsxs("a",{href:"https://linkedin.com/in/mttwhlly",target:"_blank",children:[t.jsx("i",{className:"ph-fill ph-linkedin-logo text-gray-400 text-sm md:text-md"})," ","Linkedin"]})}),t.jsxs("li",{className:"h-[42px] text-sm md:text-md",children:[t.jsx("i",{className:"ph-fill ph-envelope text-gray-400 text-sm md:text-md"})," ",t.jsx("a",{href:"mailto:matt@mattwhalley.com",children:"Email"})]})]})]})]})})}export{v as default};
